<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>products</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"/>

    <style>
          *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        #nav{ 
    height: 90px;
    padding: 20px;
    display: flex;
    box-sizing: border-box;
    place-content: stretch center;
    align-items: stretch;
    justify-content: center;
    flex-direction: row;
    border-bottom: 0.1px solid rgb(63, 54, 54);
    /* position: fixed; */
   /* border-color: 1px solid red; */
   
}
#logo{
    /* border: 1px solid red; */
    padding: 10px;
    justify-content: center;
    align-items: center;
}
        
 #navigators{
    margin: 5px;
    font-size: 15px;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content:space-around;
    width: 70%;
    padding: 0 80px 0 80px;
    /* position: fixed; */
    /* border: 1px solid red; */
    }
      #navigators div a{
        width: fit-content;
       
        /* border: 1px solid red; */
       text-decoration: none;
       color: black;
       }
      
       #navigators div{
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        display: flexbox;
        justify-content: space-evenly;
        position: relative;
        height: 20px;
        
       }

       #navigators div:hover h3 {
        color: #20a87e;
       }
       
       

     

     

      #icons{
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content:center;
            flex: 1 1 auto;
            padding-left: 5px;
           
            /* border: 1px solid red; */
        }

        #icons div{
            margin: 15px;
        }
        #icons div a{
            text-decoration: none;
        }

        #icons i {
            
        border: 2px solid white;
        padding: 5px;
        border-radius: 50%;
    }

    #icons i:hover {
        background-color: whitesmoke;
        color: #20a87e;
    }

        #gifting{
            display:block;
            justify-content: center;
            align-items: center;
            width:100px;
            margin-bottom: 40px;
            text-decoration: none;
            /* border: 1px solid red; */
        }
        #gifting img{
            width: 70px;
            padding-left: 20px;
        }
        #gift{
           display:block;
           text-align: center;
           /* border: 1px solid red; */
            margin-bottom: 40px;
        }



        /* banner */
        #banner{
            
            width:100%;
            /* border: 1px solid red; */

        }

        #banner-container img{
            width: 100%;
        }
          /*card-container  */

          #card-container{
            width: 100%;
            display:grid;
            grid-template-columns: repeat(3,1fr);
          }

          .card-div{
            
            display: block;
            justify-content: center;
            /* border: 1px solid red; */
            margin-left: 90px;
            width: 400px;
            /* box-shadow:black ; */


          }

          .card-image{
     /* border: 1px solid green; */
      width: 100%;
      background-color: #f7f7f7;
          }

          .card-text{
            /* border: 1px solid red; */
            font-size: small;
            margin: 10px;
            color: #212121;
          }

          .card-price{
            display: flex;
            /* border:1px solid red; */
            margin: 10px;
            /* font-size: ; */
          }

          .card-price del{
             margin-left:30px ;
             color:#909090;
          }

          .card-offer{
            /* border: 1px solid red; */
            margin: 10px;
            display: flex;
            justify-content: space-between;
            height:40px;
          }
          .card-offer h4{
            padding-top: 8px;
            color: #e66b55;
          }

          .cart{
            background-color:#fb641b ;
            color: #ffffff;
            border: none;
            border-radius: 3px;
            width: 100px;
            cursor: pointer;
          }

          .buy{
            background-color:#20a87e ;
            border: none;
            color: #ffffff;
            border-radius: 3px;
            width: 80px;
          }

    </style>
</head>
<body>
    <div id="nav">
        <div id="logo">
            <a href="index.html"><img src="https://images.dailyobjects.com/marche/icons/logo_named.png?tr=cm-pad_resize,v-2,w-135,h-27,dpr-1" alt=""></a>
        </div>
        <div id="navigators">
           <div>
            <a href="nav1.html"><h3>TECH</h3></a>
        
        </div> 
           
           <div><a href="nav2.html"><h3>BAGS & WALLETS</h3></a> 
           
        </div>  
           
           <div> <a href="nav3.html"><h3>WORK ESSENTIALS</h3></a> 
        </div> 
           
           <div id="gifting"><img src="https://images.dailyobjects.com/marche/corporate-page/gifting-update.png?tr=cm-pad_resize,v-2" alt=""> 
            <div id="gift"><a href="nav4.html"><h3>GIFTING</h3></a></div>
            </div>
                
           <div><a href="nav5.html"><h3>COLLECTIONS</h3></a></div> 

           <div><a href="nav6.html"><h3>SHOP BY APPLE </h3></a></div>  
             
           <div><a href="nav7.html"><h3>NEW ARRIVALS</h3></a></div> 
        </div>
        <div id="icons">
            <div><a href=""> <i class="fas fa-shopping-bag"></i></a></div>
           <div><a href=""> <i class="fas fa-user"></i></a></div>
           <div><a href=""> <i class="fa fa-search"></i></a></div>
        </div>
       
</div>

<div id="banner">
    <div id="banner-container"><img src="https://images.dailyobjects.com/marche/assets/images/other/offer-baners-updated-homepage-desktop.jpg?tr=cm-pad_crop,v-2,dpr-1" alt=""></div>
</div>

    <div id="card-container">
       <div class="card-div">  
        <div class="card-image"><img src="https://images.dailyobjects.com/marche/product-images/1101/dailyobjects-surat-city-tag-glass-case-cover-for-samsung-galaxy-m53-images/DailyObjects-Surat-City-Tag-Glass-Case-Cover-For-Samsung-Galaxy-M53-2.png?tr=cm-pad_resize,v-2,w-352,h-434,dpr-1" alt=""></div>
        <div class="card-text"> <p>Surat City Tag Glass Case Cover For Samsung Galaxy M53</p></div>
        <div class="card-price"> <h3>Rs.799</h3><del> 1299</del></div>
        <div class="card-offer"><h4 >BUY 1 GET 1 FREE*</h4>
          <button class="cart">ADD TO CART</button>
          <button class="buy">BUY NOW</button>
        </div>
    </div>
    </div>
</body>
<script>
 
 // retrieve data from API
      
     // Fetch card data from API
     fetch('http://localhost:7000/product/get')
  .then(response => response.json())
  .then(data => {
    // Loop through each card data
    data.forEach(cardData => {
      // Create card elements
      const cardDiv = document.createElement('div');
      cardDiv.classList.add('card-div');

      const cardImage = document.createElement('div');
      cardImage.classList.add('card-image');
      const image = document.createElement('img');
      image.src = cardData.image;
      image.alt = "error";
      cardImage.appendChild(image);

      const cardText = document.createElement('div');
      cardText.classList.add('card-text');
      const textParagraph = document.createElement('p');
      textParagraph.textContent = cardData.name;
      cardText.appendChild(textParagraph);

      const cardPrice = document.createElement('div');
      cardPrice.classList.add('card-price');
      const priceHeading = document.createElement('h3');
      priceHeading.textContent = cardData.price;
      const originalPrice = document.createElement('del');
      originalPrice.textContent = cardData.discounted_price;
      cardPrice.appendChild(priceHeading);
      cardPrice.appendChild(originalPrice);

      const cardOffer = document.createElement('div');
      cardOffer.classList.add('card-offer');
      const offerHeading = document.createElement('h4');
      offerHeading.textContent = cardData.offer;
      const addToCartButton = document.createElement('button');
      addToCartButton.classList.add('cart');
      addToCartButton.textContent = 'ADD TO CART';
      const buyNowButton = document.createElement('button');
      buyNowButton.classList.add('buy');
      buyNowButton.textContent = 'BUY NOW';
      cardOffer.appendChild(offerHeading);
      cardOffer.appendChild(addToCartButton);
      cardOffer.appendChild(buyNowButton);

      // Append card elements to card container
      const cardContainer = document.getElementById('card-container');
      cardDiv.appendChild(cardImage);
      cardDiv.appendChild(cardText);
      cardDiv.appendChild(cardPrice);
      cardDiv.appendChild(cardOffer);
      cardContainer.appendChild(cardDiv);

      addToCartButton.onclick = async () => {
        addToCart(cardData);
      };
    });
  })
  .catch(error => {
    console.error('Error fetching card data:', error);
  });


// Function to add a product to the cart
function addToCart(cardData) {
  fetch('http://localhost:7000/cart/add', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(cardData)
  })
    .then(response => {
      if (response.ok) {
        // Display a success message
        console.log(response)
        alert('Product added to cart');
      } 
      else {
        // Display an error message if adding to cart failed
        alert('Failed to add product to cart');
      }
    })
    .catch(error => {
      console.error('Error adding product to cart:', error);
    });
}



           
</script>
</html>